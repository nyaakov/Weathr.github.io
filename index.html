<!DOCTYPE html>
<html>
  <head>
    <title>Team 95 - Weathr</title>
    <meta charset='utf-8' />
		<link rel="stylesheet" href=".\css\calendar.css"/>
		<link rel="stylesheet" href=".\css\bootstrap.css"/>
  </head>
  <body>
			<div class="month" class="container">
			    <span>August</span>
				<br>
				<span style="font-size:18px">2018</span>
			</div>
			<div style="width: 90%; margin-left: 5%;">
			<table>
				<thead>
					<tr class="weekdays">
						<th>Mon</th>
						<th>Tue</th>
						<th>Wed</th>
						<th>Thu</th>
						<th>Fri</th>
						<th>Sat</th>
						<th>Sun</th>
					</tr>
				</thead>
				<tbody class="days">
					<tr>
						<td class="day">
              <div class = "allInCell">
                <button class = "buttonOnCell" onclick="window.location = 'http://localhost:8000/Documents/Weathr.github.io/daily.html'">
                  <div class = "topOfCell">
                    <span>
                      <div class = "numberOfDay">
                        <textarea class = "number">1</textarea>
                      </div>
                      <div class = "weatherEmoji">
                        <img src="/weatherEmoji/raindrop.png" alt="raindrop" class = "emoji">
                      </div>
                    </span>
                  </div>
                  <div class="botOfCell">
                    <span>
                      <div class="textOfEvent">
                        <textarea id="01" class = "events"></textarea>
                      </div>
                      <div class = "clothesEmoji">
                        <img src="/clothesEmoji/tshirt.png" alt="raindrop" class = "emoji">
                      </div>
                    </span>
                  </div>
                </button>
              </div>
            </td>
						<td class="day" id="02"> 2</td>
						<td class="day" id="03"> 3</td>
						<td class="day" id="04"> 4</td>
						<td class="day" id="05"> 5</td>
						<td class="day" id="06"> 6</td>
						<td class="day" id="07"> 7</td>
					</tr>
					<tr>
						<td class="day" id="08"> 8</td>
						<td class="day" id="09"> 9</td>
						<td class="day" id="10">10</td>
						<td class="day" id="11">11</td>
						<td class="day" id="12">12</td>
						<td class="day" id="13">13</td>
						<td class="day" id="14">14</td>
					</tr>
					<tr>
						<td class="day" id="15">15</td>
						<td class="day" id="16">16</td>
						<td class="day" id="17">17</td>
						<td class="day" id="18">18</td>
						<td class="day" id="19">19</td>
						<td class="day" id="20">20</td>
						<td class="day" id="21">21</td>
					</tr>
					<tr>
						<td class="day" id="22">22</td>
						<td class="day" id="23">23</td>
						<td class="day" id="24">24</td>
						<td class="day" id="25">25</td>
						<td class="day" id="26">26</td>
						<td class="day" id="27">27</td>
						<td class="day" id="28">28</td>
					</tr>
					<tr>
						<td class="day" id="29">29</td>
						<td class="day" id="30">30</td>
						<td class="day" id="31">31</td>
					</tr>
				</tbody>
			</table>
		</div>
		<script type="text/javascript" src="./scripts/monthly.js"></script>

		    <!--Add buttons to initiate auth sequence and sign out-->
		    <button id="signout-button">Sign Out</button>


		    <script type="text/javascript">
		      // Client ID and API key from the Developer Console
		      var CLIENT_ID = '802054921629-4ks90q4fmfq9r4qllkkmn677oi6obc82.apps.googleusercontent.com';
		      var API_KEY = 'AIzaSyDRHsVL1n0ktfNQ3qwzWwkl3_H_PBBaZKk';

		      // Array of API discovery doc URLs for APIs used by the site
		      var DISCOVERY_DOCS = ["https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest"];

		      // Authorization scopes required by the API; multiple scopes can be
		      // included, separated by spaces.
		      var SCOPES = "https://www.googleapis.com/auth/calendar.readonly";

		      var signoutButton = document.getElementById('signout-button');

		      /**
		       *  On load, called to load the auth2 library and API client library.
		       */
		      function handleClientLoad() {
		        gapi.load('client:auth2', initClient);
		      }

		      /**
		       *  Initializes the API client library and sets up sign-in state
		       *  listeners.
		       */
		      function initClient() {
		        gapi.client.init({
		          apiKey: API_KEY,
		          clientId: CLIENT_ID,
		          discoveryDocs: DISCOVERY_DOCS,
		          scope: SCOPES
		        }).then(function () {
		          // Listen for sign-in state changes.
		          gapi.auth2.getAuthInstance().isSignedIn.listen(updateSigninStatus);

		          // Handle the initial sign-in state.
		          updateSigninStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
		          signoutButton.onclick = handleSignoutClick;
		        });
		      }

		      /**
		       *  Called when the signed in status changes, to update the UI
		       *  appropriately. After a sign-in, the API is called.
		       */
		      function updateSigninStatus(isSignedIn) {
		        if (isSignedIn) {
		          signoutButton.style.display = 'block';
		          listUpcomingEvents();
		        } else {
		          signoutButton.style.display = 'none';
		        }
		      }

		      /**
		       *  Sign in the user upon button click.
		       */
		      function handleAuthClick(event) {
		        gapi.auth2.getAuthInstance().signIn();
		      }

		      /**
		       *  Sign out the user upon button click.
		       */
		      function handleSignoutClick(event) {
		        gapi.auth2.getAuthInstance().signOut();
		      }

		      /**
		       * Append a pre element to the body containing the given message
		       * as its text node. Used to display the results of the API call.
		       *
		       * @param {string} message Text to be placed in pre element.
		       */
		      function appendPre(message, when) {
		        var pre = document.getElementById(when.slice(8, 10));
		     	pre.innerHTML += '<br>' + message
		      }

		      /**
		       * Print the summary and start datetime/date of the next ten events in
		       * the authorized user's calendar. If no events are found an
		       * appropriate message is printed.
		       */
		      function listUpcomingEvents() {
		        gapi.client.calendar.events.list({
		          'calendarId': 'primary',
		          'timeMin': (new Date()).toISOString(),
		          'showDeleted': false,
		          'singleEvents': true,
		          'maxResults': 10,
		          'orderBy': 'startTime'
		        }).then(function(response) {
		          var events = response.result.items;

		          if (events.length > 0) {
		            for (i = 0; i < events.length; i++) {
		              var event = events[i];
		              var when = event.start.dateTime;
		              if (!when) {
		                when = event.start.date;
		              }
		              appendPre(event.summary, when)
		            }
		          }
		        });
		      }

			 window.onload() = function(){
				handleAuthClick;
			 }

	    </script>

	    <script async defer src="https://apis.google.com/js/api.js"
	      onload="this.onload=function(){};handleClientLoad();"
	      onreadystatechange="if (this.readyState === 'complete') this.onload()">

	    </script>
	</body>
</html>
